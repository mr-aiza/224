<script>
  // ðŸŽµ Ú©Ù†ØªØ±Ù„ Ù…ÙˆØ³ÛŒÙ‚ÛŒ
  const audio = document.getElementById('wigenAudio');
  const btn = document.getElementById('audioToggle');
  let playing = false;

  btn.addEventListener('click', () => {
    if (playing) {
      audio.pause();
      btn.textContent = 'Ù¾Ø®Ø´ Ù…ÙˆØ³ÛŒÙ‚ÛŒ';
    } else {
      audio.play().catch(() => alert("Ø¨Ø±Ø§ÛŒ Ù¾Ø®Ø´ØŒ Ø§Ø¨ØªØ¯Ø§ Ø±ÙˆÛŒ ØµÙØ­Ù‡ Ú©Ù„ÛŒÚ© Ú©Ù†ÛŒØ¯."));
      btn.textContent = 'ØªÙˆÙ‚Ù Ù…ÙˆØ³ÛŒÙ‚ÛŒ';
    }
    playing = !playing;
  });

  document.addEventListener('click', function autoPlayOnce() {
    audio.play().catch(() => {});
    document.removeEventListener('click', autoPlayOnce);
  });

  // ðŸ’— Ù‚Ù„Ø¨â€ŒÙ‡Ø§ÛŒ Ù¾Ø³â€ŒØ²Ù…ÛŒÙ†Ù‡ (canvas)
  const canvas = document.getElementById('bgCanvas');
  const ctx = canvas.getContext('2d');
  let W = canvas.width = window.innerWidth;
  let H = canvas.height = window.innerHeight;

  function drawHeart(ctx, x, y, size, color) {
    ctx.save();
    ctx.beginPath();
    const topCurveHeight = size * 0.3;
    ctx.moveTo(x, y + topCurveHeight);
    ctx.bezierCurveTo(x, y, x - size / 2, y, x - size / 2, y + topCurveHeight);
    ctx.bezierCurveTo(x - size / 2, y + (size + topCurveHeight) / 2, x, y + (size + topCurveHeight) / 1.2, x, y + size);
    ctx.bezierCurveTo(x, y + (size + topCurveHeight) / 1.2, x + size / 2, y + (size + topCurveHeight) / 2, x + size / 2, y + topCurveHeight);
    ctx.bezierCurveTo(x + size / 2, y, x, y, x, y + topCurveHeight);
    ctx.closePath();
    ctx.fillStyle = color;
    ctx.fill();
    ctx.restore();
  }

  const hearts = [];
  for (let i = 0; i < 70; i++) {
    hearts.push({
      x: Math.random() * W,
      y: Math.random() * H,
      size: Math.random() * 16 + 8,
      speedX: Math.random() * 0.5 + 0.2,
      speedY: Math.random() * 0.5 + 0.2,
      color: `rgba(236,64,122,${Math.random() * 0.4 + 0.3})`
    });
  }

  function update() {
    ctx.clearRect(0, 0, W, H);
    for (const h of hearts) {
      h.x += h.speedX;
      h.y += h.speedY;
      if (h.x > W) h.x = -h.size;
      if (h.y > H) h.y = -h.size;
      drawHeart(ctx, h.x, h.y, h.size, h.color);
    }
    requestAnimationFrame(update);
  }

  window.addEventListener('resize', () => {
    W = canvas.width = window.innerWidth;
    H = canvas.height = window.innerHeight;
  });

  update();

  // Ù‚Ù„Ø¨ Ù‡Ù†Ú¯Ø§Ù… Ú©Ù„ÛŒÚ©
  document.body.addEventListener('click', e => {
    const heart = document.createElement('div');
    heart.className = 'heart';
    heart.style.left = `${e.clientX - 15}px`;
    heart.style.top = `${e.clientY - 15}px`;
    document.body.appendChild(heart);
    setTimeout(() => heart.remove(), 600);
  });
</script>
